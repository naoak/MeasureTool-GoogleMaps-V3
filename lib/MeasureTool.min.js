!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("MeasureTool",[],e):"object"==typeof exports?exports.MeasureTool=e():t.MeasureTool=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=30)}([function(t,e,n){"use strict";function i(t,e){this._groups=t,this._parents=e}function o(){return new i([[document.documentElement]],D)}n.d(e,"c",function(){return D}),e.b=i;var r=n(64),a=n(65),s=n(52),u=n(46),c=n(16),l=n(51),h=n(55),f=n(57),_=n(60),p=n(67),v=n(43),d=n(59),g=n(58),y=n(66),m=n(50),x=n(49),w=n(42),T=n(18),b=n(61),L=n(44),P=n(68),k=n(53),C=n(62),A=n(56),M=n(41),S=n(54),j=n(63),E=n(45),O=n(47),U=n(7),N=n(48),D=[null];i.prototype=o.prototype={constructor:i,select:r.a,selectAll:a.a,filter:s.a,data:u.a,enter:c.a,exit:l.a,join:h.a,merge:f.a,order:_.a,sort:p.a,call:v.a,nodes:d.a,node:g.a,size:y.a,empty:m.a,each:x.a,attr:w.a,style:T.b,property:b.a,classed:L.a,text:P.a,html:k.a,raise:C.a,lower:A.a,append:M.a,insert:S.a,remove:j.a,clone:E.a,datum:O.a,on:U.c,dispatch:N.a},e.a=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(37);n.d(e,"create",function(){return i.a});var o=n(2);n.d(e,"creator",function(){return o.a});var r=n(38);n.d(e,"local",function(){return r.a});var a=n(14);n.d(e,"matcher",function(){return a.a});var s=n(39);n.d(e,"mouse",function(){return s.a});var u=n(5);n.d(e,"namespace",function(){return u.a});var c=n(6);n.d(e,"namespaces",function(){return c.a});var l=n(3);n.d(e,"clientPoint",function(){return l.a});var h=n(15);n.d(e,"select",function(){return h.a});var f=n(40);n.d(e,"selectAll",function(){return f.a});var _=n(0);n.d(e,"selection",function(){return _.a});var p=n(8);n.d(e,"selector",function(){return p.a});var v=n(19);n.d(e,"selectorAll",function(){return v.a});var d=n(18);n.d(e,"style",function(){return d.a});var g=n(69);n.d(e,"touch",function(){return g.a});var y=n(70);n.d(e,"touches",function(){return y.a});var m=n(10);n.d(e,"window",function(){return m.a});var x=n(7);n.d(e,"event",function(){return x.a}),n.d(e,"customEvent",function(){return x.b})},function(t,e,n){"use strict";function i(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===a.b&&e.documentElement.namespaceURI===a.b?e.createElement(t):e.createElementNS(n,t)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var r=n(5),a=n(6);e.a=function(t){var e=n.i(r.a)(t);return(e.local?o:i)(e)}},function(t,e,n){"use strict";e.a=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Config={prefix:"measure-tool",tooltipText1:"Drag to change, click to remove",tooltipText2:"Drag to change"}},function(t,e,n){"use strict";var i=n(6);e.a=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.a.hasOwnProperty(e)?{space:i.a[e],local:t}:t}},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var i="http://www.w3.org/1999/xhtml";e.a={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(t,e,n){"use strict";function i(t,e,n){return t=o(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function o(t,e,n){return function(i){var o=l;l=i;try{t.call(this,this.__data__,e,n)}finally{l=o}}}function r(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function a(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function s(t,e,n){var r=c.hasOwnProperty(t.type)?i:o;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function u(t,e,n,i){var o=l;t.sourceEvent=l,l=t;try{return e.apply(n,i)}finally{l=o}}n.d(e,"a",function(){return l}),e.b=u;var c={},l=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(c={mouseenter:"mouseover",mouseleave:"mouseout"})}e.c=function(t,e,n){var i,o,u=r(t+""),c=u.length;{if(!(arguments.length<2)){for(l=e?s:a,null==n&&(n=!1),i=0;i<c;++i)this.each(l(u[i],e,n));return this}var l=this.node().__on;if(l)for(var h,f=0,_=l.length;f<_;++f)for(i=0,h=l[f];i<c;++i)if((o=u[i]).type===h.type&&o.name===h.name)return h.value}}},function(t,e,n){"use strict";function i(){}e.a=function(t){return null==t?i:function(){return this.querySelector(t)}}},function(t,e,n){"use strict";var i=n(7);e.a=function(){for(var t,e=i.a;t=e.sourceEvent;)e=t;return e}},function(t,e,n){"use strict";e.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UnitTypeId={METRIC:"metric",IMPERIAL:"imperial",NAUTICAL:"nautical"}},function(t,e,n){"use strict";function i(t,e){var i=t.document.documentElement,a=n.i(o.select)(t).on("dragstart.drag",null);e&&(a.on("click.drag",r.a,!0),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in i?a.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}e.b=i;var o=n(1),r=n(13);e.a=function(t){var e=t.document.documentElement,i=n.i(o.select)(t).on("dragstart.drag",r.a,!0);"onselectstart"in e?i.on("selectstart.drag",r.a,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}},function(t,e,n){"use strict";function i(){o.event.stopImmediatePropagation()}e.b=i;var o=n(1);e.a=function(){o.event.preventDefault(),o.event.stopImmediatePropagation()}},function(t,e,n){"use strict";e.a=function(t){return function(){return this.matches(t)}}},function(t,e,n){"use strict";var i=n(0);e.a=function(t){return"string"==typeof t?new i.b([[document.querySelector(t)]],[document.documentElement]):new i.b([[t]],i.c)}},function(t,e,n){"use strict";function i(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}e.b=i;var o=n(17),r=n(0);e.a=function(){return new r.b(this._enter||this._groups.map(o.a),this._parents)},i.prototype={constructor:i,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},function(t,e,n){"use strict";e.a=function(t){return new Array(t.length)}},function(t,e,n){"use strict";function i(t){return function(){this.style.removeProperty(t)}}function o(t,e,n){return function(){this.style.setProperty(t,e,n)}}function r(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function a(t,e){return t.style.getPropertyValue(e)||n.i(s.a)(t).getComputedStyle(t,null).getPropertyValue(e)}e.a=a;var s=n(10);e.b=function(t,e,n){return arguments.length>1?this.each((null==e?i:"function"==typeof e?r:o)(t,e,null==n?"":n)):a(this.node(),t)}},function(t,e,n){"use strict";function i(){return[]}e.a=function(t){return null==t?i:function(){return this.querySelectorAll(t)}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(4),a=function(){function t(e,n){i(this,t),this._defaultOptions={width:150},this._options=Object.assign({},this._defaultOptions,n||{}),this._parentDiv=e,this._containerDiv=document.createElement("div"),this._containerDiv.classList.add(r.Config.prefix+"-context-menu"),this._containerDiv.oncontextmenu=function(t){return t.preventDefault()},this._list=document.createElement("ul"),this._containerDiv.appendChild(this._list),e.appendChild(this._containerDiv),this._isVisible=!1}return o(t,[{key:"left",get:function(){return this._containerDiv.getBoundingClientRect().left}},{key:"top",get:function(){return this._containerDiv.getBoundingClientRect().top}},{key:"width",get:function(){return this._containerDiv.getBoundingClientRect().width}},{key:"height",get:function(){return this._containerDiv.getBoundingClientRect().height}}]),o(t,[{key:"addItem",value:function(t,e,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this,r=document.createElement("li"),a=document.createTextNode(t);return r.appendChild(a),r.onclick=function(t){t.preventDefault(),n.apply(o),i.hide()},e?this.showItem(r):this.hideItem(r),this._list.appendChild(r),r}},{key:"hideItem",value:function(t){t.style.cssText="display: none"}},{key:"showItem",value:function(t){t.style.cssText="display: block"}},{key:"toggleItems",value:function(t,e){var n=this;t.forEach(function(t){return n.showItem(t)}),e.forEach(function(t){return n.hideItem(t)})}},{key:"show",value:function(t){this._isVisible=!0,this._containerDiv.style.cssText="\n      display: block;\n      visibility: hidden;\n      position: absolute;\n      width: "+this._options.width+"px; \n    ";var e=this._parentDiv.getBoundingClientRect().width<=t.x+this.width,n=this._parentDiv.getBoundingClientRect().height<=t.y+this.height;this._containerDiv.style.cssText+="\n      "+(e?"right: 0px;":"left: "+t.x+"px;")+"\n      "+(n?"bottom: 14px;":"top: "+t.y+"px;")+"\n      visibility: visible;\n    "}},{key:"hide",value:function(){this._isVisible=!1,this._containerDiv.style.cssText="display: none"}},{key:"toggle",value:function(t){this._isVisible?this.hide():this.show(t)}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EVENT_START="measure_start",e.EVENT_END="measure_end",e.EVENT_CHANGE="measure_change"},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Geometry=function(){function t(){i(this,t),this._nodes=[]}return o(t,[{key:"nodes",get:function(){return this._nodes}},{key:"lines",get:function(){var t=[];if(this._nodes.length>1)for(var e=1;e<this._nodes.length;e++)t.push([this._nodes[e-1],this._nodes[e]]);return t}}]),o(t,[{key:"addNode",value:function(t){this._nodes.push(t)}},{key:"updateNode",value:function(t,e){this._nodes[t]=e}},{key:"removeNode",value:function(t){this._nodes.splice(t,1)}},{key:"insertNode",value:function(t,e){this._nodes.splice(t,0,e)}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(11),a=function(){function t(e){i(this,t),this._options={unit:r.UnitTypeId.METRIC},Object.assign(this._options,e),this.init()}return o(t,[{key:"init",value:function(){this.initUnits()}},{key:"initUnits",value:function(){switch(this._options.unit.toLowerCase()){case r.UnitTypeId.METRIC:this._lengthMultiplier=1,this.formatLength=this._formatLengthMetric,this._areaMultiplier=1,this.formatArea=this._formatAreaMetric;break;case r.UnitTypeId.IMPERIAL:this._lengthMultiplier=3.28084,this.formatLength=this._formatLengthImperial,this._areaMultiplier=10.7639,this.formatArea=this._formatAreaImperial;break;case r.UnitTypeId.NAUTICAL:this._lengthMultiplier=1,this.formatLength=this._formatLengthNautical,this._areaMultiplier=1,this.formatArea=this._formatAreaMetric;break;default:this._lengthMultiplier=1,this.formatLength=this._formatLengthMetric,this._areaMultiplier=1,this.formatArea=this._formatAreaMetric}}},{key:"setOption",value:function(t,e){if(!this._options[t])throw new Error(t+" is not a valid option on MeasureTool helper");this._options[t]=e,this.initUnits()}},{key:"computeLengthBetween",value:function(t,e){return google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(t[1],t[0]),new google.maps.LatLng(e[1],e[0]))*this._lengthMultiplier}},{key:"computePathLength",value:function(t){for(var e=0,n=1;n<t.length;n++)e+=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(t[n-1][1],t[n-1][0]),new google.maps.LatLng(t[n][1],t[n][0]));return e*this._lengthMultiplier}},{key:"computeArea",value:function(t){return google.maps.geometry.spherical.computeArea(t.map(function(t){return new google.maps.LatLng(t[1],t[0])}))*this._areaMultiplier}},{key:"_formatLengthMetric",value:function(t){var e=void 0;return t/1e3>=1?(e="km",t/=1e3):e="m",this._numberToLocale(this._roundUp(t,2))+" "+e}},{key:"_formatLengthImperial",value:function(t){var e=void 0;return t/5280>=1?(e="mi",t/=5280):e="ft",this._numberToLocale(this._roundUp(t,2))+" "+e}},{key:"_formatLengthNautical",value:function(t){return t/=1852,this._numberToLocale(this._roundUp(t,2))+" NM"}},{key:"_formatAreaMetric",value:function(t){var e=void 0;return t/1e6>=1?(e="km²",t/=1e6):e="m²",this._numberToLocale(this._roundUp(t,2))+" "+e}},{key:"_formatAreaImperial",value:function(t){var e=void 0;return 3.587e-8*t>=1?(e="mi²",t*=3.587e-8):e="ft²",this._numberToLocale(this._roundUp(t,2))+" "+e}},{key:"_roundUp",value:function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e).toFixed(e)}},{key:"_numberToLocale",value:function(t){return(new Intl.NumberFormat).format(t)}}],[{key:"findTouchPoint",value:function(t,e){var n=((t[1][1]-t[0][1])*(e[0]-t[0][0])-(t[1][0]-t[0][0])*(e[1]-t[0][1]))/(Math.pow(t[1][1]-t[0][1],2)+Math.pow(t[1][0]-t[0][0],2));return[e[0]-n*(t[1][1]-t[0][1]),e[1]+n*(t[1][0]-t[0][0])]}},{key:"findMidPoint",value:function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}},{key:"transformText",value:function(e,n){var i=t.findMidPoint([e,n]),o=void 0;return o=e[0]===n[0]?n[1]>e[1]?90:n[1]<e[1]?270:0:180*Math.atan((n[1]-e[1])/(n[0]-e[0]))/Math.PI,"translate("+i[0]+", "+i[1]+") rotate("+o+")"}},{key:"makeId",value:function(t){return(Math.random().toString(36)+"00000000000000000").slice(2,t+2)}},{key:"_interpolate",value:function(t,e,n){var i=google.maps.geometry.spherical.interpolate(new google.maps.LatLng(t[1],t[0]),new google.maps.LatLng(e[1],e[0]),n);return[i.lng(),i.lat()]}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ObjectAssign=function(){"function"!=typeof Object.assign&&(Object.assign=function(t){if(null===t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t})}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,n,o){i(this,t),this._defaultOptions={offsetRate:8e3},this._options=Object.assign({},this._defaultOptions,o||{}),this._container=e,this._projection=n}return o(t,[{key:"latLngToSvgPoint",value:function(t){var e=this._options.offsetRate/2,n=new google.maps.LatLng(t[1],t[0]),i=this._projection.fromLatLngToDivPixel(n);return[i.x+e,i.y+e]}},{key:"svgPointToLatLng",value:function(t){var e=this._options.offsetRate/2,n=new google.maps.Point(t[0]-e,t[1]-e),i=this._projection.fromDivPixelToLatLng(n);return[i.lng(),i.lat()]}},{key:"svgPointToContainerPoint",value:function(t){var e=this.svgPointToLatLng(t);return this._projection.fromLatLngToContainerPixel(new google.maps.LatLng(e[1],e[0]))}},{key:"latLngToContainerPoint",value:function(t){return this._projection.fromLatLngToContainerPixel(new google.maps.LatLng(t[1],t[0]))}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Segment=function(){function t(e,n,o,r){i(this,t),this._start=e,this._end=n,this._length=o,this._lengthText=r}return o(t,[{key:"toJSON",value:function(){return{start_location:{lat:this._start[1],lng:this._start[0]},end_location:{lat:this._end[1],lng:this._end[0]},length:{text:this._lengthText,value:this._length}}}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(4),a=function(){function t(e){i(this,t),this._parentDiv=e,this._containerDiv=document.createElement("div"),this._containerDiv.classList.add(r.Config.prefix+"-tooltip"),e.appendChild(this._containerDiv)}return o(t,[{key:"show",value:function(t,e){this._containerDiv.innerHTML=e,this._containerDiv.style.cssText="\n      display: block;\n      visibility: hidden;\n      position: absolute;\n    ";var n=this._parentDiv.getBoundingClientRect().width,i=this._parentDiv.getBoundingClientRect().height;this._containerDiv.style.cssText+=t.x<n/2?"left: "+t.x+"px;":"right: "+(n-t.x)+"px;",this._containerDiv.style.cssText+=t.y<i/2?"top: "+t.y+"px":"bottom: "+(i-t.y)+"px;",this._containerDiv.style.cssText+="visibility: visible;"}},{key:"hide",value:function(){this._containerDiv.style.cssText="display: none"}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.deepClone=function t(e){if(!e)return e;var n=[Number,String,Boolean],o=void 0;if(n.forEach(function(t){e instanceof t&&(o=t(e))}),void 0===o)if("[object Array]"===Object.prototype.toString.call(e))o=[],e.forEach(function(e,n,i){o[n]=t(e)});else if("object"===(void 0===e?"undefined":i(e)))if(e.nodeType&&"function"==typeof e.cloneNode)o=e.cloneNode(!0);else if(e.prototype)o=e;else if(e instanceof Date)o=new Date(e);else{o={};for(var r in e)o[r]=t(e[r])}else o=e;return o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(34);n.d(e,"drag",function(){return i.a});var o=n(12);n.d(e,"dragDisable",function(){return o.a}),n.d(e,"dragEnable",function(){return o.b})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(4),u=n(20),c=i(u),l=n(27),h=i(l),f=n(1),_=n(25),p=i(_),v=n(22),d=n(26),g=n(29),y=n(23),m=i(y),x=n(11),w=n(21),T=n(24),b=n(28),L=function(){function t(e,n){r(this,t),t._initPolyfills(),this._options={showSegmentLength:!0,showAccumulativeLength:!0,contextMenu:!0,tooltip:!0,unit:x.UnitTypeId.METRIC,initialSegments:[]},Object.assign(this._options,n),this._map=e,this._map.setClickableIcons(!1),this._id=m.default.makeId(4),this._events=new Map,this._init()}return a(t,[{key:"lengthText",get:function(){return this._helper.formatLength(this._length||0)}},{key:"areaText",get:function(){return this._helper.formatArea(this._area||0)}},{key:"length",get:function(){return this._length||0}},{key:"area",get:function(){return this._area||0}},{key:"segments",get:function(){return(0,b.deepClone)(this._segments)||[]}},{key:"points",get:function(){return(0,b.deepClone)(this._geometry.nodes.map(function(t){return{lat:t[1],lng:t[0]}}))||[]}}],[{key:"UnitTypeId",get:function(){return x.UnitTypeId}}]),a(t,[{key:"_init",value:function(){this._containerDiv=this._map.getDiv().querySelector("div:first-child"),this._options.contextMenu&&(this._contextMenu=new c.default(this._containerDiv,{width:160}),this._startElementNode=this._contextMenu.addItem("Measure distance",!0,this.start,this),this._endElementNode=this._contextMenu.addItem("Clear measurement",!1,this.end,this),this._bindToggleContextMenu()),this._options.tooltip&&(this._tooltip=new h.default(this._containerDiv)),this._helper=new m.default({unit:this._options.unit}),this._initOverlay()}},{key:"_bindToggleContextMenu",value:function(){var t=this;this._map.addListener("rightclick",function(e){t._firstClick=e,t._contextMenu.show(t._projection.fromLatLngToContainerPixel(e.latLng))}),document.addEventListener("keydown",function(e){27===e.which&&t._contextMenu.hide()}),this._containerDiv.addEventListener("mousedown",function(e){e.clientX>=t._contextMenu.left&&e.clientX<=t._contextMenu.left+t._contextMenu.width&&e.clientY>=t._contextMenu.top&&e.clientY<=t._contextMenu.top+t._contextMenu.height||t._contextMenu.hide()})}},{key:"start",value:function(t){var e=this;if(!this._started){this._overlay.setMap(this._map),this._geometry=new v.Geometry,this._segments=[];var n=t&&t.length>0;if(!this._options.contextMenu&&n)for(var i=0;i<t.length;i++){var o=t[i];if(this._geometry.addNode([o.lng,o.lat]),i>0){var r=t[i-1];this._updateSegment([r,o])}}this._options.contextMenu&&this._firstClick&&(this._checkClick(this._firstClick),this._contextMenu.toggleItems([this._endElementNode],[this._startElementNode])),this._mapClickEvent=this._map.addListener("click",function(t){return e._checkClick(t)}),this._map.setOptions({draggableCursor:"default"}),this._started=!0,"function"==typeof this._events.get(w.EVENT_START)&&this._events.get(w.EVENT_START)()}}},{key:"end",value:function(){this._started&&("function"==typeof this._events.get(w.EVENT_END)&&this._events.get(w.EVENT_END)(this._getResults()),this._options.contextMenu&&this._contextMenu.toggleItems([this._startElementNode],[this._endElementNode]),this._mapClickEvent.remove(),this._geometry=new v.Geometry,this._onRemoveOverlay(),this._setOverlay(),this._overlay.setMap(null),this._map.setOptions({draggableCursor:null}),this._started=!1)}},{key:"addListener",value:function(t,e){this._events.set(t,e)}},{key:"removeListener",value:function(t){this._events.delete(t)}},{key:"setOption",value:function(t,e){if(!this._options[t])throw new Error(t+" is not a valid option on MeasureTool");this._options[t]=e,this._helper._options[t]&&this._helper.setOption(t,e),this._overlay&&this._nodeCircles&&this._redrawOverlay()}},{key:"_initOverlay",value:function(){this._setOverlay(),this._initComplete=!1}},{key:"_setOverlay",value:function(){this._overlay=new google.maps.OverlayView,this._overlay.onAdd=this._onAddOverlay.bind(this),this._overlay.draw=this._onDrawOverlay.bind(this),this._overlay.onRemove=this._onRemoveOverlay.bind(this),this._overlay.setMap(this._map)}},{key:"_onAddOverlay",value:function(){this._initComplete||(this._initComplete=!0),this._projection=this._overlay.getProjection(),this._projectionUtility=new p.default(this._containerDiv,this._projection),this._svgOverlay=(0,f.select)(this._overlay.getPanes().overlayMouseTarget).append("div").attr("class",s.Config.prefix+"-measure-points-"+this._id).append("svg").attr("class",s.Config.prefix+"-svg-overlay"),this._linesBase=this._svgOverlay.append("g").attr("class","base"),this._linesBase.selectAll("line").data(this._geometry?this._geometry.lines:[]),this._linesAux=this._svgOverlay.append("g").attr("class","aux"),this._linesAux.selectAll("line").data(this._geometry?this._geometry.lines:[]),this._nodeCircles=this._svgOverlay.append("g").attr("class","node-circle"),this._nodeCircles.selectAll("circle").data(this._geometry?this._geometry.nodes:[]),this._options.showSegmentLength&&(this._segmentText=this._svgOverlay.append("g").attr("class","segment-text"),this._segmentText.selectAll("text").data(this._geometry?this._geometry.lines:[])),this._options.showAccumulativeLength&&(this._nodeText=this._svgOverlay.append("g").attr("class","node-text"),this._nodeText.selectAll("text").data(this._geometry?this._geometry.nodes:[])),this._hoverCircle=this._svgOverlay.append("g").attr("class","hover-circle"),this._hoverCircle.append("circle").attr("class","grey-circle").attr("r",5),this._initComplete&&!this._started&&this._overlay.setMap(null)}},{key:"_onDrawOverlay",value:function(){this._updateCircles(),this._updateLine(),this._options.showSegmentLength&&this._updateSegmentText(),this._options.showAccumulativeLength&&this._updateNodeText(),this._geometry&&this._updateArea(this._geometry.nodes.length-1,this._geometry.nodes[this._geometry.nodes.length-1]),this._dispatchMeasureEvent()}},{key:"_onRemoveOverlay",value:function(){(0,f.select)(this._overlay.getPanes().overlayMouseTarget).selectAll("."+s.Config.prefix+"-measure-points-"+this._id).remove()}},{key:"_redrawOverlay",value:function(){this._onRemoveOverlay(),this._setOverlay(),this._overlay.draw()}},{key:"_checkClick",value:function(t){if(!this._dragged&&0==this._nodeCircles.selectAll('circle[r="6"]').size()&&!this._hoverCircle.select("circle").attr("cx")){var e=[t.latLng.lng(),t.latLng.lat()];this._geometry.addNode(e),this._overlay.draw()}this._dragged=!1}},{key:"_updateCircles",value:function(){var t=this,e=this;this._nodeCircles.selectAll("circle").data(this._geometry?this._geometry.nodes:[]).attr("class",function(t,e){return 0===e?"cover-circle head-circle":"cover-circle"}).attr("r",5).attr("cx",function(e){return t._projectionUtility.latLngToSvgPoint(e)[0]}).attr("cy",function(e){return t._projectionUtility.latLngToSvgPoint(e)[1]}).on("mouseover",function(t,n){e._onOverCircle(t,n,this)}).on("mouseout",function(t){e._onOutCircle(t,this)}).on("touchstart",function(t,n){e._onOverCircle(t,n,this)}).on("touchleave",function(t){e._onOutCircle(t,this)}).on("mousedown",function(){return t._hideTooltip()}).call(this._onDragCircle()).enter().append("circle").attr("class","cover-circle").attr("r",5).attr("cx",function(e){return t._projectionUtility.latLngToSvgPoint(e)[0]}).attr("cy",function(e){return t._projectionUtility.latLngToSvgPoint(e)[1]}).on("mouseover",function(t,n){e._onOverCircle(t,n,this)}).on("mouseout",function(t){e._onOutCircle(t,this)}).on("touchstart",function(t,n){e._onOverCircle(t,n,this)}).on("touchleave",function(t){e._onOutCircle(t,this)}).on("mousedown",function(){return t._hideTooltip()}).call(this._onDragCircle()),this._nodeCircles.selectAll(".removed-circle").remove()}},{key:"_updateLine",value:function(){var t=this;this._segments=[];var e=this._linesBase.selectAll("line").data(this._geometry?this._geometry.lines:[]).attr("class","base-line").attr("x1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[0]}).attr("y1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[1]}).attr("x2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[0]}).attr("y2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[1]}).each(function(e){return t._updateSegment(e)});e.enter().append("line").attr("class","base-line").attr("x1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[0]}).attr("y1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[1]}).attr("x2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[0]}).attr("y2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[1]}).each(function(e){return t._updateSegment(e)}),e.exit().remove();var n=this._linesAux.selectAll("line").data(this._geometry?this._geometry.lines:[]).attr("class","aux-line").attr("x1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[0]}).attr("y1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[1]}).attr("x2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[0]}).attr("y2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[1]}).on("mousemove",function(e){var n=m.default.findTouchPoint([t._projectionUtility.latLngToSvgPoint(e[0]),t._projectionUtility.latLngToSvgPoint(e[1])],[f.event.offsetX,f.event.offsetY]);t._updateHoverCirclePosition(n[0],n[1])}).on("mouseout",function(e){return t._hideHoverCircle()}).on("mousedown",function(){return t._hideTooltip()}).call(this._onDragLine());n.enter().append("line").attr("class","aux-line").attr("x1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[0]}).attr("y1",function(e){return t._projectionUtility.latLngToSvgPoint(e[0])[1]}).attr("x2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[0]}).attr("y2",function(e){return t._projectionUtility.latLngToSvgPoint(e[1])[1]}).on("mousemove",function(e){var n=m.default.findTouchPoint([t._projectionUtility.latLngToSvgPoint(e[0]),t._projectionUtility.latLngToSvgPoint(e[1])],[f.event.offsetX,f.event.offsetY]);t._updateHoverCirclePosition(n[0],n[1])}).on("mouseout",function(e){return t._hideHoverCircle()}).on("mousedown",function(){return t._hideTooltip()}).call(this._onDragLine()),n.exit().remove()}},{key:"_updateSegmentText",value:function(){var t=this,e=this._segmentText.selectAll("text").data(this._geometry?this._geometry.lines:[]).attr("class","segment-measure-text").attr("text-anchor","middle").attr("dominant-baseline","text-before-edge").attr("transform",function(e){var n=t._projectionUtility.latLngToSvgPoint(e[0]),i=t._projectionUtility.latLngToSvgPoint(e[1]);return m.default.transformText(n,i)}).text(function(e,n){return t._helper.formatLength(t._helper.computeLengthBetween(e[0],e[1]))});e.enter().append("text").attr("class","segment-measure-text").attr("text-anchor","middle").attr("dominant-baseline","text-before-edge").attr("transform",function(e){var n=t._projectionUtility.latLngToSvgPoint(e[0]),i=t._projectionUtility.latLngToSvgPoint(e[1]);return m.default.transformText(n,i)}).text(function(e,n){return t._helper.formatLength(t._helper.computeLengthBetween(e[0],e[1]))}),e.exit().remove()}},{key:"_updateNodeText",value:function(){var t=this,e=this._nodeText.selectAll("text").data(this._geometry?this._geometry.nodes:[]).attr("class",function(t,e){return 0===e?"node-measure-text head-text":"node-measure-text"}).attr("text-anchor","middle").attr("dominant-baseline","text-after-edge").attr("x",function(e){return t._projectionUtility.latLngToSvgPoint(e)[0]}).attr("y",this._transformNodeTextY.bind(this)).text(function(e,n){var i=t._helper.computePathLength(t._geometry.nodes.slice(0,n+1));return n===t._geometry.nodes.length-1&&(t._length=i),t._helper.formatLength(i)});e.enter().append("text").attr("class",function(t,e){return 0===e?"node-measure-text head-text":"node-measure-text"}).attr("text-anchor","middle").attr("dominant-baseline","text-after-edge").attr("x",function(e){return t._projectionUtility.latLngToSvgPoint(e)[0]}).attr("y",this._transformNodeTextY.bind(this)).text(function(e,n){var i=t._helper.computePathLength(t._geometry.nodes.slice(0,n+1));return n===t._geometry.nodes.length-1&&(t._length=i),t._helper.formatLength(i)}),e.exit().remove()}},{key:"_onOverCircle",value:function(t,e,n){this._dragging||((0,f.select)(n).attr("r",6),this._options.tooltip&&this._tooltip.show(this._projectionUtility.latLngToContainerPoint(t),0===e?s.Config.tooltipText2:s.Config.tooltipText1))}},{key:"_onOutCircle",value:function(t,e){(0,f.select)(e).attr("r",5),this._hideTooltip()}},{key:"_onDragCircle",value:function(){var t=this,e=!1,n=(0,g.drag)().on("drag",function(n,i){e=!0,t._dragging=!0,(0,f.select)(this).attr("cx",f.event.x).attr("cy",f.event.y),t._updateLinePosition.call(t,t._linesBase,i),t._updateLinePosition.call(t,t._linesAux,i),t._options.showSegmentLength&&t._updateSegmentTextPosition(i),t._options.showAccumulativeLength&&t._updateNodeTextPosition(i),t._updateArea(i,t._projectionUtility.svgPointToLatLng([f.event.x,f.event.y]))});return n.on("start",function(e){f.event.sourceEvent.stopPropagation(),(0,f.select)(this).raise().attr("r",6),t._disableMapScroll()}),n.on("end",function(n,i){t._enableMapScroll(),e?(t._geometry.updateNode(i,t._projectionUtility.svgPointToLatLng([f.event.x,f.event.y])),t._showTooltipOnEvent(0===i?s.Config.tooltipText2:s.Config.tooltipText1)):i>0?(t._geometry.removeNode(i),(0,f.select)(this).classed("removed-circle",!0)):(t._geometry.addNode(n),t._dragged=!0),e=!1,t._dragging=!1,t._overlay.draw()}),n}},{key:"_onDragLine",value:function(){var t=this,e=!1,n=(0,g.drag)().on("drag",function(n,i){t._dragging=!0,e||(e=!0,t._geometry.insertNode(i+1,t._projectionUtility.svgPointToLatLng([f.event.x,f.event.y])),t._updateLine(),t._options.showSegmentLength&&t._updateSegmentText(),t._options.showAccumulativeLength&&t._updateNodeText()),t._updateHoverCirclePosition(f.event.x,f.event.y),t._updateLinePosition(t._linesBase,i+1),t._updateLinePosition(t._linesAux,i+1),t._options.showSegmentLength&&t._updateSegmentTextPosition(i+1),t._options.showAccumulativeLength&&t._updateNodeTextPosition(i+1),t._updateArea(i+1,t._projectionUtility.svgPointToLatLng([f.event.x,f.event.y]))});return n.on("start",function(){f.event.sourceEvent.stopPropagation(),t._hoverCircle.select("circle").attr("class","cover-circle"),t._disableMapScroll()}),n.on("end",function(n,i){t._enableMapScroll(),e&&(t._geometry.updateNode(i+1,t._projectionUtility.svgPointToLatLng([f.event.x,f.event.y])),t._hideHoverCircle(),t._overlay.draw(),e=!1,t._showTooltipOnEvent(s.Config.tooltipText1)),t._updateArea(i+1,t._projectionUtility.svgPointToLatLng([f.event.x,f.event.y])),t._hoverCircle.select("circle").attr("class","grey-circle"),t._dragging=!1}),n}},{key:"_updateLinePosition",value:function(t,e){e<this._geometry.lines.length&&t.select("line:nth-child("+(e+1)+")").attr("x1",f.event.x).attr("y1",f.event.y),e>0&&t.select("line:nth-child("+e+")").attr("x2",f.event.x).attr("y2",f.event.y)}},{key:"_updateSegmentTextPosition",value:function(t){var e=this;t<this._geometry.lines.length&&this._segmentText.select("text:nth-child("+(t+1)+")").attr("transform",function(t){var n=[f.event.x,f.event.y],i=e._projectionUtility.latLngToSvgPoint(t[1]);return m.default.transformText(n,i)}).text(function(t){return e._helper.formatLength(e._helper.computeLengthBetween(e._projectionUtility.svgPointToLatLng([f.event.x,f.event.y]),t[1]))}),t>0&&this._segmentText.select("text:nth-child("+t+")").attr("transform",function(t){var n=e._projectionUtility.latLngToSvgPoint(t[0]),i=[f.event.x,f.event.y];return m.default.transformText(n,i)}).text(function(t){return e._helper.formatLength(e._helper.computeLengthBetween(t[0],e._projectionUtility.svgPointToLatLng([f.event.x,f.event.y])))})}},{key:"_updateNodeTextPosition",value:function(t){var e=this;this._nodeText.select("text:nth-child("+(t+1)+")").attr("x",f.event.x).attr("y",function(){var n=void 0;return n=t>0&&e._projectionUtility.latLngToSvgPoint(e._geometry.nodes[t-1])[1]<f.event.y?23:-7,f.event.y+n}),this._nodeText.select("text:nth-child("+(t+2)+")").attr("y",function(n){var i=void 0;return i=t+1>0&&f.event.y<e._projectionUtility.latLngToSvgPoint(n)[1]?23:-7,e._projectionUtility.latLngToSvgPoint(n)[1]+i}),this._nodeText.selectAll("text").filter(function(e,n){return n>=t}).text(function(n,i){var r=e._helper.computePathLength([].concat(o(e._geometry.nodes.slice(0,t)),[e._projectionUtility.svgPointToLatLng([f.event.x,f.event.y])],o(e._geometry.nodes.slice(t+1,t+1+i))));return t+i===e._geometry.nodes.length-1&&(e._length=r),e._helper.formatLength(r)})}},{key:"_updateHoverCirclePosition",value:function(t,e){this._hoverCircle.select("circle").attr("cx",t).attr("cy",e),this._dragging||this._options.tooltip&&this._tooltip.show(this._projectionUtility.svgPointToContainerPoint([t,e]),s.Config.tooltipText2)}},{key:"_hideHoverCircle",value:function(){this._hoverCircle.select("circle").attr("cx",null).attr("cy",null),this._hideTooltip()}},{key:"_disableMapScroll",value:function(){this._zoomControl=!!document.querySelector("button[aria-label='Zoom in']"),this._map.setOptions({scrollwheel:!1,gestureHandling:"none",zoomControl:!1})}},{key:"_enableMapScroll",value:function(){this._map.setOptions({scrollwheel:!0,gestureHandling:"auto",zoomControl:this._zoomControl})}},{key:"_transformNodeTextY",value:function(t,e){var n=void 0;return n=e>0&&this._geometry.nodes[e-1][1]>t[1]?23:-7,this._projectionUtility.latLngToSvgPoint(t)[1]+n}},{key:"_updateArea",value:function(t,e){if(this._geometry){var n=this._geometry.nodes.length,i=1/80*this.length,r=void 0,a=0;n>2&&(0===t?(r=this._helper.computeLengthBetween(this._geometry.nodes[n-1],e),a=r>i?0:this._helper.computeArea([e].concat(o(this._geometry.nodes.slice(1,n-1))))):t===n-1?(r=this._helper.computeLengthBetween(e,this._geometry.nodes[0]),a=r>i?0:this._helper.computeArea(this._geometry.nodes.slice(0,n-1))):t>0&&t<n-1?(r=this._helper.computeLengthBetween(this._geometry.nodes[0],this._geometry.nodes[n-1]),a=r>i?0:this._helper.computeArea([].concat(o(this._geometry.nodes.slice(0,t)),[e],o(this._geometry.nodes.slice(t+1))))):(r=this._helper.computeLengthBetween(this._geometry.nodes[0],this._geometry.nodes[n-1]),a=r>i?0:this._helper.computeArea(this._geometry.nodes))),this._area=a,a>0&&this._nodeText.select(":last-child").text("Total distance: "+this.lengthText+"; Total area: "+this.areaText+".")}}},{key:"_showTooltipOnEvent",value:function(t){this._options.tooltip&&this._tooltip.show(this._projectionUtility.svgPointToContainerPoint([f.event.x,f.event.y]),t)}},{key:"_hideTooltip",value:function(){this._options.tooltip&&this._tooltip.hide()}},{key:"_dispatchMeasureEvent",value:function(){if(this._started){var t=this._getResults();this._lastMeasure&&this._lastMeasure.result.lengthText===this.lengthText&&this._lastMeasure.result.areaText===this.areaText||"function"==typeof this._events.get(w.EVENT_CHANGE)&&this._events.get(w.EVENT_CHANGE)(this._lastMeasure=t)}}},{key:"_updateSegment",value:function(t){var e=this._helper.computeLengthBetween(t[0],t[1]),n=this._helper.formatLength(e);this._segments.push(new d.Segment(t[0],t[1],e,n).toJSON())}},{key:"_getResults",value:function(){return{result:{length:this.length,lengthText:this.lengthText,area:this.area,areaText:this.areaText,segments:this.segments,points:this.points}}}}],[{key:"_initPolyfills",value:function(){(0,T.ObjectAssign)()}}]),t}();e.default=L,t.exports=e.default},function(t,e,n){"use strict";function i(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new o(i)}function o(t){this._=t}function r(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function a(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function s(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=u,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}var u={value:function(){}};o.prototype=i.prototype={constructor:o,on:function(t,e){var n,i=this._,o=r(t+"",i),u=-1,c=o.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<c;)if(n=(t=o[u]).type)i[n]=s(i[n],t.name,e);else if(null==e)for(n in i)i[n]=s(i[n],t.name,null);return this}for(;++u<c;)if((n=(t=o[u]).type)&&(n=a(i[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),r=0;r<n;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,n=i.length;r<n;++r)i[r].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}},e.a=i},function(t,e,n){"use strict";var i=n(31);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function i(){return!u.event.ctrlKey&&!u.event.button}function o(){return this.parentNode}function r(t){return null==t?{x:u.event.x,y:u.event.y}:t}function a(){return navigator.maxTouchPoints||"ontouchstart"in this}var s=n(32),u=n(1),c=n(12),l=n(13),h=n(33),f=n(35);e.a=function(){function t(t){t.on("mousedown.drag",e).filter(k).on("touchstart.drag",v).on("touchmove.drag",d).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!T&&b.apply(this,arguments)){var t=y("mouse",L.apply(this,arguments),u.mouse,this,arguments);t&&(n.i(u.select)(u.event.view).on("mousemove.drag",_,!0).on("mouseup.drag",p,!0),n.i(c.a)(u.event.view),n.i(l.b)(),w=!1,m=u.event.clientX,x=u.event.clientY,t("start"))}}function _(){if(n.i(l.a)(),!w){var t=u.event.clientX-m,e=u.event.clientY-x;w=t*t+e*e>S}C.mouse("drag")}function p(){n.i(u.select)(u.event.view).on("mousemove.drag mouseup.drag",null),n.i(c.b)(u.event.view,w),n.i(l.a)(),C.mouse("end")}function v(){if(b.apply(this,arguments)){var t,e,i=u.event.changedTouches,o=L.apply(this,arguments),r=i.length;for(t=0;t<r;++t)(e=y(i[t].identifier,o,u.touch,this,arguments))&&(n.i(l.b)(),e("start"))}}function d(){var t,e,i=u.event.changedTouches,o=i.length;for(t=0;t<o;++t)(e=C[i[t].identifier])&&(n.i(l.a)(),e("drag"))}function g(){var t,e,i=u.event.changedTouches,o=i.length;for(T&&clearTimeout(T),T=setTimeout(function(){T=null},500),t=0;t<o;++t)(e=C[i[t].identifier])&&(n.i(l.b)(),e("end"))}function y(e,i,o,r,a){var s,c,l,h=o(i,e),_=A.copy();if(n.i(u.customEvent)(new f.a(t,"beforestart",s,e,M,h[0],h[1],0,0,_),function(){return null!=(u.event.subject=s=P.apply(r,a))&&(c=s.x-h[0]||0,l=s.y-h[1]||0,!0)}))return function p(v){var d,g=h;switch(v){case"start":C[e]=p,d=M++;break;case"end":delete C[e],--M;case"drag":h=o(i,e),d=M}n.i(u.customEvent)(new f.a(t,v,s,e,d,h[0]+c,h[1]+l,h[0]-g[0],h[1]-g[1],_),_.apply,_,[v,r,a])}}var m,x,w,T,b=i,L=o,P=r,k=a,C={},A=n.i(s.a)("start","drag","end"),M=0,S=0;return t.filter=function(e){return arguments.length?(b="function"==typeof e?e:n.i(h.a)(!!e),t):b},t.container=function(e){return arguments.length?(L="function"==typeof e?e:n.i(h.a)(e),t):L},t.subject=function(e){return arguments.length?(P="function"==typeof e?e:n.i(h.a)(e),t):P},t.touchable=function(e){return arguments.length?(k="function"==typeof e?e:n.i(h.a)(!!e),t):k},t.on=function(){var e=A.on.apply(A,arguments);return e===A?t:e},t.clickDistance=function(e){return arguments.length?(S=(e=+e)*e,t):Math.sqrt(S)},t}},function(t,e,n){"use strict";function i(t,e,n,i,o,r,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=o,this.x=r,this.y=a,this.dx=s,this.dy=u,this._=c}e.a=i,i.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var i=n(2),o=n(15);e.a=function(t){return n.i(o.a)(n.i(i.a)(t).call(document.documentElement))}},function(t,e,n){"use strict";function i(){return new o}function o(){this._="@"+(++r).toString(36)}e.a=i;var r=0;o.prototype=i.prototype={constructor:o,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}},function(t,e,n){"use strict";var i=n(9),o=n(3);e.a=function(t){var e=n.i(i.a)();return e.changedTouches&&(e=e.changedTouches[0]),n.i(o.a)(t,e)}},function(t,e,n){"use strict";var i=n(0);e.a=function(t){return"string"==typeof t?new i.b([document.querySelectorAll(t)],[document.documentElement]):new i.b([null==t?[]:t],i.c)}},function(t,e,n){"use strict";var i=n(2);e.a=function(t){var e="function"==typeof t?t:n.i(i.a)(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}},function(t,e,n){"use strict";function i(t){return function(){this.removeAttribute(t)}}function o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r(t,e){return function(){this.setAttribute(t,e)}}function a(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function s(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function u(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var c=n(5);e.a=function(t,e){var l=n.i(c.a)(t);if(arguments.length<2){var h=this.node();return l.local?h.getAttributeNS(l.space,l.local):h.getAttribute(l)}return this.each((null==e?l.local?o:i:"function"==typeof e?l.local?u:s:l.local?a:r)(l,e))}},function(t,e,n){"use strict";e.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(t,e,n){"use strict";function i(t){return t.trim().split(/^|\s+/)}function o(t){return t.classList||new r(t)}function r(t){this._node=t,this._names=i(t.getAttribute("class")||"")}function a(t,e){for(var n=o(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function s(t,e){for(var n=o(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function u(t){return function(){a(this,t)}}function c(t){return function(){s(this,t)}}function l(t,e){return function(){(e.apply(this,arguments)?a:s)(this,t)}}r.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}},e.a=function(t,e){var n=i(t+"");if(arguments.length<2){for(var r=o(this.node()),a=-1,s=n.length;++a<s;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?l:e?u:c)(n,e))}},function(t,e,n){"use strict";function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function o(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}e.a=function(t){return this.select(t?o:i)}},function(t,e,n){"use strict";function i(t,e,n,i,o,r){for(var s,u=0,c=e.length,l=r.length;u<l;++u)(s=e[u])?(s.__data__=r[u],i[u]=s):n[u]=new a.b(t,r[u]);for(;u<c;++u)(s=e[u])&&(o[u]=s)}function o(t,e,n,i,o,r,s){var c,l,h,f={},_=e.length,p=r.length,v=new Array(_);for(c=0;c<_;++c)(l=e[c])&&(v[c]=h=u+s.call(l,l.__data__,c,e),h in f?o[c]=l:f[h]=l);for(c=0;c<p;++c)h=u+s.call(t,r[c],c,r),(l=f[h])?(i[c]=l,l.__data__=r[c],f[h]=null):n[c]=new a.b(t,r[c]);for(c=0;c<_;++c)(l=e[c])&&f[v[c]]===l&&(o[c]=l)}var r=n(0),a=n(16),s=n(36),u="$";e.a=function(t,e){if(!t)return y=new Array(this.size()),p=-1,this.each(function(t){y[++p]=t}),y;var a=e?o:i,u=this._parents,c=this._groups;"function"!=typeof t&&(t=n.i(s.a)(t));for(var l=c.length,h=new Array(l),f=new Array(l),_=new Array(l),p=0;p<l;++p){var v=u[p],d=c[p],g=d.length,y=t.call(v,v&&v.__data__,p,u),m=y.length,x=f[p]=new Array(m),w=h[p]=new Array(m);a(v,d,x,w,_[p]=new Array(g),y,e);for(var T,b,L=0,P=0;L<m;++L)if(T=x[L]){for(L>=P&&(P=L+1);!(b=w[P])&&++P<m;);T._next=b||null}}return h=new r.b(h,u),h._enter=f,h._exit=_,h}},function(t,e,n){"use strict";e.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(t,e,n){"use strict";function i(t,e,i){var o=n.i(a.a)(t),r=o.CustomEvent;"function"==typeof r?r=new r(e,i):(r=o.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function o(t,e){return function(){return i(this,t,e)}}function r(t,e){return function(){return i(this,t,e.apply(this,arguments))}}var a=n(10);e.a=function(t,e){return this.each(("function"==typeof e?r:o)(t,e))}},function(t,e,n){"use strict";e.a=function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],a=0,s=r.length;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this}},function(t,e,n){"use strict";e.a=function(){return!this.node()}},function(t,e,n){"use strict";var i=n(17),o=n(0);e.a=function(){return new o.b(this._exit||this._groups.map(i.a),this._parents)}},function(t,e,n){"use strict";var i=n(0),o=n(14);e.a=function(t){"function"!=typeof t&&(t=n.i(o.a)(t));for(var e=this._groups,r=e.length,a=new Array(r),s=0;s<r;++s)for(var u,c=e[s],l=c.length,h=a[s]=[],f=0;f<l;++f)(u=c[f])&&t.call(u,u.__data__,f,c)&&h.push(u);return new i.b(a,this._parents)}},function(t,e,n){"use strict";function i(){this.innerHTML=""}function o(t){return function(){this.innerHTML=t}}function r(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}e.a=function(t){return arguments.length?this.each(null==t?i:("function"==typeof t?r:o)(t)):this.node().innerHTML}},function(t,e,n){"use strict";function i(){return null}var o=n(2),r=n(8);e.a=function(t,e){var a="function"==typeof t?t:n.i(o.a)(t),s=null==e?i:"function"==typeof e?e:n.i(r.a)(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})}},function(t,e,n){"use strict";e.a=function(t,e,n){var i=this.enter(),o=this,r=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(o=e(o)),null==n?r.remove():n(r),i&&o?i.merge(o).order():o}},function(t,e,n){"use strict";function i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}e.a=function(){return this.each(i)}},function(t,e,n){"use strict";var i=n(0);e.a=function(t){for(var e=this._groups,n=t._groups,o=e.length,r=n.length,a=Math.min(o,r),s=new Array(o),u=0;u<a;++u)for(var c,l=e[u],h=n[u],f=l.length,_=s[u]=new Array(f),p=0;p<f;++p)(c=l[p]||h[p])&&(_[p]=c);for(;u<o;++u)s[u]=e[u];return new i.b(s,this._parents)}},function(t,e,n){"use strict";e.a=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var a=i[o];if(a)return a}return null}},function(t,e,n){"use strict";e.a=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}},function(t,e,n){"use strict";e.a=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,a=o[r];--r>=0;)(i=o[r])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this}},function(t,e,n){"use strict";function i(t){return function(){delete this[t]}}function o(t,e){return function(){this[t]=e}}function r(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}e.a=function(t,e){return arguments.length>1?this.each((null==e?i:"function"==typeof e?r:o)(t,e)):this.node()[t]}},function(t,e,n){"use strict";function i(){this.nextSibling&&this.parentNode.appendChild(this)}e.a=function(){return this.each(i)}},function(t,e,n){"use strict";function i(){var t=this.parentNode;t&&t.removeChild(this)}e.a=function(){return this.each(i)}},function(t,e,n){"use strict";var i=n(0),o=n(8);e.a=function(t){"function"!=typeof t&&(t=n.i(o.a)(t));for(var e=this._groups,r=e.length,a=new Array(r),s=0;s<r;++s)for(var u,c,l=e[s],h=l.length,f=a[s]=new Array(h),_=0;_<h;++_)(u=l[_])&&(c=t.call(u,u.__data__,_,l))&&("__data__"in u&&(c.__data__=u.__data__),f[_]=c);return new i.b(a,this._parents)}},function(t,e,n){"use strict";var i=n(0),o=n(19);e.a=function(t){"function"!=typeof t&&(t=n.i(o.a)(t));for(var e=this._groups,r=e.length,a=[],s=[],u=0;u<r;++u)for(var c,l=e[u],h=l.length,f=0;f<h;++f)(c=l[f])&&(a.push(t.call(c,c.__data__,f,l)),s.push(c));return new i.b(a,s)}},function(t,e,n){"use strict";e.a=function(){var t=0;return this.each(function(){++t}),t}},function(t,e,n){"use strict";function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var o=n(0);e.a=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=i);for(var n=this._groups,r=n.length,a=new Array(r),s=0;s<r;++s){for(var u,c=n[s],l=c.length,h=a[s]=new Array(l),f=0;f<l;++f)(u=c[f])&&(h[f]=u);h.sort(e)}return new o.b(a,this._parents).order()}},function(t,e,n){"use strict";function i(){this.textContent=""}function o(t){return function(){this.textContent=t}}function r(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}e.a=function(t){return arguments.length?this.each(null==t?i:("function"==typeof t?r:o)(t)):this.node().textContent}},function(t,e,n){"use strict";var i=n(9),o=n(3);e.a=function(t,e,r){arguments.length<3&&(r=e,e=n.i(i.a)().changedTouches);for(var a,s=0,u=e?e.length:0;s<u;++s)if((a=e[s]).identifier===r)return n.i(o.a)(t,a);return null}},function(t,e,n){"use strict";var i=n(9),o=n(3);e.a=function(t,e){null==e&&(e=n.i(i.a)().touches);for(var r=0,a=e?e.length:0,s=new Array(a);r<a;++r)s[r]=n.i(o.a)(t,e[r]);return s}}])});